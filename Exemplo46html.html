<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="Description" content="Enter your description here" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
    <title>Exemplo 46 - JavaScript</title>
    <style type="text/css" id="operaUserStyle"></style>
  </head>
  <body>
    <div class="container">
      <div class="alert alert-primary" role="alert">
        <h1>Exemplo 1 - Método Reduce</h1>
        <p>Seja o vetor de objetos</p>
        <pre>
produtos =[
                {nome: "Camiseta", preco: 120, cor: "verde" },
                { nome: "Calça", preco: 200, cor: "amarelo" },
                { nome: "Sapato", preco: 350, cor: "verde" },
                { nome: "Sapato", preco: 150, cor: "branco" },
                { nome: "Sapato", preco: 250, cor: "Preto" },
                { nome: "Sapato", preco: 100, cor: "Azul" },
                { nome: "Bermuda", preco: 60, cor: "verde" },
                { nome: "Chinelo", preco: 60, cor: "verde" },
                ];
            </pre
        >
        <p></p>
        <div class="d-grid gap-2">
          <button
            type="button"
            id="cmdResultado"
            class="btn btn-primary"
            onclick="aplicarDesconto()"
          >
            Clique para obter um desconto de 10% em todos os produtos
          </button>
        </div>
        <div class="d-grid gap-2">
          <button
            type="button"
            id="cmdResultado2"
            class="btn btn-primary"
            onclick="verificarDescontoTotal()"
          >
            Clique aqui para saber o valor total do desconto
          </button>
        </div>
      </div>
      <div class="alert alert-success" role="alert">
        <h4>Resultado Com Desconto</h4>
        <p id="resultadoComDesconto"></p>
      </div>
      <div class="alert alert-success" role="alert">
        <h4>Valor Total do Desconto</h4>
        <p id="resultadoValorTotalDesconto"></p>
      </div>
    </div>
    <script>
      produtos = [
        { nome: "Camiseta", preco: 120, cor: "verde" },
        { nome: "Calça", preco: 200, cor: "amarelo" },
        { nome: "Sapato", preco: 350, cor: "verde" },
        { nome: "Sapato", preco: 150, cor: "branco" },
        { nome: "Sapato", preco: 250, cor: "Preto" },
        { nome: "Sapato", preco: 100, cor: "Azul" },
        { nome: "Bermuda", preco: 60, cor: "verde" },
        { nome: "Chinelo", preco: 60, cor: "verde" },
      ];
      function aplicarDesconto() {
        const produtosComDesconto = produto.map((produto) => ({
          nome: produto.nome,
          preço: produto.preco,
          desconto: produto.preco - produto.preco * 0.9,
          precoFinal: produto.preco * 0.9,
        }));
        const resultado2 = document.getElementById("Resultado comDesconto");
        resultado2.textContent = JSON.stringify(produtosComDesconto, null, 2);
      }

      function verificarDescontoTotal() {
        // Acumulador para armazenar o valor total do desconto
        let valorTotalDesconto = 0;

        // Aplique o desconto a todos os produtos
        const produtosComDesconto = produtos.reduce(
          (valorTotal, valorAtual) => {
            // Calcule o desconto
            const desconto = valorAtual.preco - valorAtual.preco * 0.9;

            // Atualize o acumulador
            valorTotal.push({
              nome: valorAtual.nome,
              desconto: desconto,
            });

            // Atualize o valor total do desconto
            valorTotalDesconto += desconto;

            return valorTotal;
          },
          []
        );

        const resultado2 = document.getElementById("resultadoComDesconto");
        resultado2.textContent = JSON.stringify(produtosComDesconto, null, 2);

        // Exiba o valor total do desconto
        const resultado3 = document.getElementById(
          "resultadoValorTotalDesconto"
        );
        resultado3.textContent = `Valor total do desconto: R$ ${valorTotalDesconto}`;
      }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/js/bootstrap.min.js"></script>
  </body>
</html>
